{% extends "base.html" %}

{% block content %}
<div class="container my-4">
    <h1 class="text-center mb-4">User Settings</h1>

    <!-- Success Message -->
    {% if messages %}
        <div class="alert alert-success" role="alert">
            {% for message in messages %}
                {{ message }}
            {% endfor %}
        </div>
    {% endif %}

    <!-- Error Message -->
    {% if form.errors %}
        <div class="alert alert-danger" role="alert">
            <ul>
                {% for field, errors in form.errors.items %}
                    <li>{{ field|capfirst }}: {{ errors|join:", " }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <form method="post" class="p-4 border rounded shadow-sm bg-light">
        {% csrf_token %}

        <!-- Notification Settings -->
        <div class="mb-4">
            <h2 class="h5 mb-3">Notification Settings</h2>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="notify_by_email" name="notify_by_email" 
                       {% if notification_settings.notify_by_email %}checked{% endif %}>
                <label class="form-check-label" for="notify_by_email">Notify by email</label>
            </div>
            <div class="mt-3">
                <label for="notify_time" class="form-label">Notification Time:</label>
                <input type="time" id="notify_time" name="notify_time" class="form-control"
                       value="{{ notification_settings.notify_time }}">
            </div>
        </div>

        <!-- Dark Theme -->
        <div class="mb-4">
            <h2 class="h5 mb-3">Theme Settings</h2>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="dark_theme" name="dark_theme" 
                       {% if request.session.dark_theme %}checked{% endif %}>
                <label class="form-check-label" for="dark_theme">Enable Dark Theme</label>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-primary">Save Settings</button>
            <a href="{% url 'dashboard:dashboard_home' %}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
